<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Forest Flappy Bird</title>
    <meta name="description" content="Forest" />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body>
 <script>
  console.log("FUNFOU", AFRAME);
  setInterval(function(){ 
    var player = document.querySelector("a-camera");
    var pos = player.getAttribute("position");
    pos.z += -0.1;
    player.setAttribute("position", pos);
  }, 30);
   
  AFRAME.registerComponent("foo", {
    init: function() {
      console.log("FUNFOU DENOVO", AFRAME);
      var player = document.querySelector("a-camera")
      var direction = new THREE.Vector3();

      window.addEventListener("keydown", (e) => {
        var valorMovimento = 3;
        if (e.code === "KeyA") {
					this.el.sceneEl.camera.getWorldDirection( direction );
					direction.multiplyScalar(3)
          var pos = player.getAttribute("position")
          // faster - but getAttribute wont work
          //player.object3D.position.add(direction)
          if(pos.x > -3){
            pos.x -= valorMovimento;
          }
         	player.setAttribute("position", pos);
        }
        if (e.code === "KeyD") {
					this.el.sceneEl.camera.getWorldDirection( direction );
					direction.multiplyScalar(3)
          var pos = player.getAttribute("position")
          // faster - but getAttribute wont work
          //player.object3D.position.add(direction)
          if(pos.x < 3){
            pos.x += valorMovimento;
          }
          console.log("Posição:", pos.x);
         	player.setAttribute("position", pos);
        }
      });
    }
  });


      </script>
    <a-scene background="color: #ECECEC">
      model-viewer="gltfModel: #triceratops; title: Triceratops"
      <!-- Asset management system. -->
      <a-assets>
        <img
          id="background"
          src="https://cdn.glitch.com/7acea05c-8f2b-4204-85e2-5da6acd4d00e%2Fforest.jpg?v=1618502661233"
        />
        <img
          id="ground"
          src="https://cdn.glitch.com/7acea05c-8f2b-4204-85e2-5da6acd4d00e%2Fgrass.jpg?v=1618502555728"
        />
      </a-assets>

      <a-asset-item  
        id="triceratops"
        position="0 1 -5"
        src="https://cdn.glitch.com/7acea05c-8f2b-4204-85e2-5da6acd4d00e%2Fscene.gltf?v=1618527096263"
        response-type="arraybuffer"
        static-body
        physics-collider="ignoreSleep: true"
      ></a-asset-item>
      <a-plane id="parede1" src="#ground" position="0 0 -5" width="3" height="9" color="#ff0000"></a-plane>
      <a-plane id="parede2" src="#ground" position="-3 0 -5" width="3" height="9" color="#090808"></a-plane>
      <a-plane id="parede3" src="#ground" position="3 0 -5" width="3" height="9" color="#090808"></a-plane>
      <a-plane id="parede4" src="#ground" position="0 0 -15" width="3" height="9" color="#090808"></a-plane>
      <a-plane id="parede5" src="#ground" position="-3 0 -15" width="3" height="9" color="#ff0000"></a-plane>
      <a-plane id="parede6" src="#ground" position="3 0 -15" width="3" height="9" color="#090808"></a-plane>
      <a-plane id="parede7" src="#ground" position="0 0 -25" width="3" height="9" color="#090808"></a-plane>
      <a-plane id="parede8" src="#ground" position="-3 0 -25" width="3" height="9" color="#090808"></a-plane>
      <a-plane id="parede9" src="#ground" position="3 0 -25" width="3" height="9" color="#ff0000" ></a-plane>
           <a-plane id="parede10" src="#ground" position="-3 0 -35" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede11" src="#ground" position="0 0 -35" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede12" src="#ground" position="3 0 -35" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede13" src="#ground" position="-3 0 -45" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede14" src="#ground" position="0 0 -45" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede15" src="#ground" position="3 0 -45" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede16" src="#ground" position="-3 0 -55" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede17" src="#ground" position="0 0 -55" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede18" src="#ground" position="3 0 -55" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede19" src="#ground" position="-3 0 -65" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede20" src="#ground" position="0 0 -65" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede21" src="#ground" position="3 0 -65" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede22" src="#ground" position="-3 0 -75" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede23" src="#ground" position="0 0 -75" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede24" src="#ground" position="3 0 -75" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede25" src="#ground" position="-3 0 -85" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede26" src="#ground" position="0 0 -85" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede27" src="#ground" position="3 0 -85" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede28" src="#ground" position="-3 0 -95" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede29" src="#ground" position="0 0 -95" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede30" src="#ground" position="3 0 -95" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede31" src="#ground" position="-3 0 -105" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede32" src="#ground" position="0 0 -105" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede33" src="#ground" position="3 0 -105" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede34" src="#ground" position="-3 0 -115" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede35" src="#ground" position="0 0 -115" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede36" src="#ground" position="3 0 -115" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede37" src="#ground" position="-3 0 -125" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede38" src="#ground" position="0 0 -125" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede39" src="#ground" position="3 0 -125" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede40" src="#ground" position="-3 0 -135" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede41" src="#ground" position="0 0 -135" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede42" src="#ground" position="3 0 -135" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede43" src="#ground" position="-3 0 -145" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede44" src="#ground" position="0 0 -145" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede45" src="#ground" position="3 0 -145" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede46" src="#ground" position="-3 0 -155" width="3" height="9" color="#ff0000"></a-plane>
           <a-plane id="parede47" src="#ground" position="0 0 -155" width="3" height="9" color="#090808"></a-plane>
           <a-plane id="parede48" src="#ground" position="3 0 -155" width="3" height="9" color="#090808"></a-plane>

      <a-camera foo wasd-controls="enabled:false" position = "0 1.6 0"></a-camera>

      <a-sky src="#background" repeat="5"></a-sky>
      <a-plane
        src="#ground"
        position="0 0 -10"
        rotation="-90 0 0"
        width="10"
        height="300"
        color="#7BC8A4"
        repeat="2 80"
        shadow
      ></a-plane>
    </a-scene>
  </body>
</html>
